<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Untitled</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Xun Sun</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="resume.html">Resume</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/xs2569">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="dashboard.html">Dashboard</a>
</li>
<li>
  <a href="mailto:xunsun800@gmail.com">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/xun-sun-serena">
    <span class="fa fa-linkedin fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Untitled</h1>

</div>


<div id="column" class="section level2" data-width="650">
<h2>Column</h2>
<div id="chart-a" class="section level3">
<h3>Chart A</h3>
<pre class="r"><code>get_all_inspections = function(url) {
  
  all_inspections = vector(&quot;list&quot;, length = 0)
  
  loop_index = 1
  chunk_size = 50000
  DO_NEXT = TRUE
  
  while (DO_NEXT) {
    message(&quot;Getting data, page &quot;, loop_index)
    
    all_inspections[[loop_index]] = 
      GET(url,
          query = list(`$order` = &quot;zipcode&quot;,
                       `$limit` = chunk_size,
                       `$offset` = as.integer((loop_index - 1) * chunk_size)
                       )
          ) %&gt;%
      content(&quot;text&quot;) %&gt;%
      fromJSON() %&gt;%
      as_tibble()
    
    DO_NEXT = dim(all_inspections[[loop_index]])[1] == chunk_size
    loop_index = loop_index + 1
  }
  
  all_inspections
  
}

url = &quot;https://data.cityofnewyork.us/resource/43nn-pn8j.json&quot;

nyc_inspections = 
  get_all_inspections(url) %&gt;%
  bind_rows() </code></pre>
<pre><code>## Getting data, page 1</code></pre>
<pre><code>## Getting data, page 2</code></pre>
<pre><code>## Getting data, page 3</code></pre>
<pre><code>## Getting data, page 4</code></pre>
<pre><code>## Getting data, page 5</code></pre>
<pre><code>## Getting data, page 6</code></pre>
<pre class="r"><code># Clean and prepare data
rest_clean &lt;- nyc_inspections %&gt;%
  drop_na() |&gt;
  mutate(
    inspection_date = as.Date(inspection_date),
    year = year(inspection_date),
    month = month(inspection_date, label = TRUE),
    cuisine = str_to_title(cuisine_description)
  ) %&gt;%
  # Filter for recent years and common cuisines
  filter(
    year &gt;= 2014,
    cuisine %in% (
      rest_inspec %&gt;%
      count(cuisine_description) %&gt;%
      top_n(10, n) %&gt;%
      pull(cuisine_description)
    )
  ) %&gt;%
  # Sample for better performance
  sample_n(1000)

# Calculate cuisine summaries
cuisine_summary &lt;- rest_clean %&gt;%
  group_by(cuisine) %&gt;%
  summarise(
    avg_score = mean(score, na.rm = TRUE),
    n_inspections = n(),
    pct_a = mean(grade == &quot;A&quot;) * 100,
    n_critical = sum(critical_flag == &quot;Critical&quot;, na.rm = TRUE)
  ) %&gt;%
  arrange(desc(n_inspections))</code></pre>
<pre><code>## Warning: There were 7 warnings in `summarise()`.
## The first warning was:
## ℹ In argument: `avg_score = mean(score, na.rm = TRUE)`.
## ℹ In group 1: `cuisine = &quot;American&quot;`.
## Caused by warning in `mean.default()`:
## ! 参数不是数值也不是逻辑值：返回NA
## ℹ Run `dplyr::last_dplyr_warnings()` to see the 6 remaining warnings.</code></pre>
<pre class="r"><code># Violation patterns
violation_patterns &lt;- rest_clean %&gt;%
  group_by(violation_code, violation_description) %&gt;%
  summarise(
    count = n(),
    avg_score = mean(score, na.rm = TRUE),
    pct_critical = mean(critical_flag == &quot;Critical&quot;, na.rm = TRUE) * 100
  ) %&gt;%
  arrange(desc(count)) %&gt;%
  head(15)</code></pre>
<pre><code>## Warning: There were 80 warnings in `summarise()`.
## The first warning was:
## ℹ In argument: `avg_score = mean(score, na.rm = TRUE)`.
## ℹ In group 1: `violation_code = &quot;02B&quot;` and `violation_description = &quot;Hot TCS
##   food item not held at or above 140 °F.&quot;`.
## Caused by warning in `mean.default()`:
## ! 参数不是数值也不是逻辑值：返回NA
## ℹ Run `dplyr::last_dplyr_warnings()` to see the 79 remaining warnings.</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;violation_code&#39;. You can override using
## the `.groups` argument.</code></pre>
<pre class="r"><code>plot_ly(rest_clean, x = ~cuisine, y = ~score, type = &quot;box&quot;,
        color = ~grade,
        colors = c(&quot;A&quot; = &quot;#2ecc71&quot;, &quot;B&quot; = &quot;#f1c40f&quot;, &quot;C&quot; = &quot;#e74c3c&quot; ,&quot;P&quot; = &quot;#9b59b6&quot;,    
                  &quot;Z&quot; = &quot;#95a5a6&quot;),
        boxpoints = &quot;outliers&quot;) %&gt;%
  layout(
    title = &quot;Distribution of Inspection Scores by Cuisine&quot;,
    xaxis = list(title = &quot;Cuisine Type&quot;,
                 tickangle = 45),
    yaxis = list(title = &quot;Inspection Score&quot;,
                 autorange = &quot;reversed&quot;),
    showlegend = TRUE,
    margin = list(b = 100)
  )</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-4d7abbeec5d85229296e" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-4d7abbeec5d85229296e">{"x":{"visdat":{"66b86e593960":["function () ","plotlyVisDat"]},"cur_data":"66b86e593960","attrs":{"66b86e593960":{"x":{},"y":{},"boxpoints":"outliers","color":{},"colors":["#2ecc71","#f1c40f","#e74c3c","#9b59b6","#95a5a6"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"box"}},"layout":{"margin":{"b":100,"l":60,"t":25,"r":10},"title":"Distribution of Inspection Scores by Cuisine","xaxis":{"domain":[0,1],"automargin":true,"title":"Cuisine Type","tickangle":45,"type":"category","categoryorder":"array","categoryarray":["American","Caribbean","Chinese","Italian","Japanese","Mexican","Pizza"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Inspection Score","autorange":"reversed","type":"category","categoryorder":"array","categoryarray":["0","10","11","12","13","14","15","16","17","18","19","2","20","21","22","23","24","25","26","27","28","29","3","30","31","32","33","35","36","37","38","39","4","40","41","42","43","44","46","47","48","49","5","50","51","52","53","54","56","58","6","60","61","63","65","67","7","70","73","74","8","85","87","9","94"]},"showlegend":true,"hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"fillcolor":"rgba(46,204,113,0.5)","x":["Chinese","American","Pizza","Chinese","American","Pizza","American","Pizza","Italian","Chinese","Mexican","American","American","American","Pizza","American","American","American","American","Chinese","Caribbean","American","Pizza","American","American","American","American","Chinese","Caribbean","Chinese","Chinese","Italian","American","Pizza","American","Chinese","Italian","Mexican","American","American","American","American","American","Chinese","American","American","American","Italian","American","Chinese","Caribbean","Italian","Pizza","American","Chinese","Italian","American","American","Chinese","Pizza","American","Mexican","Caribbean","American","Pizza","American","Pizza","Caribbean","American","American","Pizza","American","American","Chinese","Caribbean","Caribbean","Mexican","Pizza","American","American","Chinese","American","American","Caribbean","Chinese","Mexican","American","Mexican","Italian","American","American","Chinese","Chinese","American","Chinese","Chinese","American","American","American","Chinese","Mexican","Pizza","American","American","Chinese","Italian","American","Chinese","American","Japanese","American","Pizza","Mexican","Mexican","Mexican","Mexican","Caribbean","Italian","Japanese","Italian","Mexican","Pizza","Pizza","American","Japanese","Pizza","Pizza","American","American","Mexican","American","American","American","Caribbean","Italian","Chinese","American","American","Chinese","Pizza","Pizza","Chinese","Chinese","American","Italian","American","American","Chinese","Chinese","Pizza","Pizza","American","Japanese","American","Pizza","American","Italian","American","American","Chinese","American","Pizza","Chinese","American","Mexican","American","Chinese","American","Mexican","American","Japanese","Pizza","American","Chinese","American","Chinese","Pizza","Pizza","Italian","Pizza","American","American","American","American","Japanese","American","Chinese","Pizza","American","Mexican","Chinese","Pizza","Chinese","Japanese","Italian","American","American","American","Mexican","Chinese","Mexican","American","Japanese","American","Caribbean","American","American","Chinese","American","Chinese","American","Italian","Mexican","American","Caribbean","Chinese","Caribbean","Chinese","Caribbean","American","American","Pizza","American","Chinese","Japanese","Italian","American","Mexican","American","Pizza","American","American","Pizza","American","American","Mexican","American","American","Pizza","Chinese","Chinese","Caribbean","American","American","American","Pizza","American","Chinese","Italian","Chinese","Mexican","American","American","American","American","American","American","Mexican","Chinese","Mexican","Mexican","Caribbean","American","American","American","Pizza","Pizza","Chinese","Chinese","American","Italian","Chinese","Italian","American","American","Mexican","American","American","Caribbean","Italian","American","Italian","Chinese","Italian","Mexican","American","Pizza","Japanese","Mexican","American","American","American","Japanese","American","American","Chinese","American","Mexican","American","Chinese","American","American","American","Pizza","American","American","Caribbean","Italian","Chinese","Mexican","Pizza","Mexican","American","American","Japanese","Pizza","Italian","American","American","Pizza","Mexican","Mexican","Japanese","Chinese","American","American","Mexican","Chinese","Chinese","American","Chinese","Chinese","Italian","American","American","American","Chinese","American","American","Italian","Caribbean","Chinese","Chinese","American","Mexican","American","Chinese","American","American","American","Pizza","American","Chinese","Chinese","Chinese","American","Caribbean","Chinese","American","Mexican","American","Pizza","American","Japanese","American","Mexican","American","Italian","American","Pizza","Chinese","American","Pizza","Japanese","Italian","Pizza","American","American","American","Pizza","American","Pizza","Pizza","Italian","Chinese","Japanese","American","Italian","American","American","Chinese","American","Pizza","American","Mexican","Italian","American","American","Caribbean","American","American","Chinese","American","American","American","Chinese","Italian","American","American","American","Japanese","American","Japanese","American","Italian","Mexican","American","American","Pizza","American","Chinese","American","American","American","Chinese","American","Italian","American","American","American","American","Pizza","Chinese","American","American","Caribbean","Pizza","Chinese","American","Caribbean","American","Chinese","Italian","American","Italian","American","Japanese","Italian","American","American","Japanese","American","American","American","American","Japanese","American","Caribbean","American","American","Caribbean","American","Pizza","American","Caribbean","American","American","American","Chinese","Italian","Italian","Chinese","Mexican","American","Italian","Chinese","Pizza","Caribbean","American","Pizza","Chinese","American","Chinese","Chinese","American","American","Mexican","Pizza","American","Italian","American","Chinese","Italian","American","Japanese","Chinese","Italian","Italian","Japanese","Chinese","Chinese","American","Chinese","American","Chinese","American","Mexican","Pizza","American","Chinese","American","American","Chinese","Pizza","Japanese","Pizza","Chinese","American","Chinese","Caribbean","American","Mexican","Chinese","American","American","Chinese","American","Italian","American","Chinese","American","Caribbean","Italian","Pizza","Caribbean","American","American","American","Chinese","Chinese","Mexican","Italian","Caribbean","Japanese","American","Mexican","Caribbean","Italian","American","American","American","American","American","Chinese","Pizza","Japanese","American","American","American","American","American","Pizza","Pizza","American","Italian","American","American","Pizza","Pizza","American","Chinese","Pizza","American","Chinese","Pizza","Pizza","American","American","American","Italian","Mexican","Pizza","Italian","Chinese","Chinese","American","Japanese","Caribbean","American","Chinese","American","Japanese","American","Japanese","Japanese","Chinese","American","American","Chinese","American","American","American","Japanese","American","American","Chinese","Pizza","Pizza","Caribbean","Mexican","Japanese","Chinese","American","Pizza","American","American","Italian","American","Italian","Chinese","Chinese","Italian","American","Italian","American","Pizza","Chinese","Mexican","Chinese","Pizza","Caribbean","Pizza","American","American","Mexican","Chinese","American","American","Japanese","Chinese","Italian","Caribbean","Japanese","Italian","Caribbean","Italian","American","Chinese","Japanese","Chinese","American","Japanese","Pizza","American","American","Mexican","American","Chinese","Italian","Pizza","American","Chinese","Caribbean","Italian","Caribbean","Mexican","Japanese","American","Pizza","American","Italian","Pizza","Japanese","American","American","Chinese","Chinese","Japanese","American","American","Pizza","Pizza","American","American","Mexican","American","American","Mexican","Mexican","American","Pizza","Chinese","Caribbean","American","Pizza","Chinese","American","Chinese","American","Chinese","Mexican","Japanese","Chinese","American","American","American","Caribbean","Chinese","American","American","Italian","American","Japanese","Japanese","Caribbean","American","Chinese","Italian","Caribbean","Caribbean","Chinese","Japanese","American","Chinese","American"],"y":["11","9","12","8","2","9","5","7","4","9","9","13","12","9","12","10","13","13","11","4","13","13","11","11","12","13","5","11","4","13","11","9","12","11","11","7","13","9","8","7","7","5","4","7","12","9","10","12","12","13","13","10","7","2","13","2","7","13","13","13","13","8","12","12","12","12","5","7","12","7","12","9","12","11","12","11","8","12","13","2","13","10","13","7","8","13","8","8","9","10","12","13","13","13","9","0","13","13","11","11","11","7","13","10","11","9","10","11","12","10","8","11","6","13","11","13","12","10","9","9","13","13","13","10","4","10","7","7","13","5","10","12","7","13","13","13","13","12","12","13","13","0","10","10","12","11","3","11","12","11","12","13","9","13","11","12","12","12","12","12","12","9","7","13","13","6","12","9","13","9","9","7","9","0","13","11","13","10","12","2","10","12","12","12","10","11","12","11","12","9","12","13","12","7","10","12","12","13","3","7","11","12","12","4","9","11","7","13","10","12","13","12","9","13","13","5","11","10","12","13","5","9","13","12","12","11","7","12","8","12","5","10","13","12","13","8","11","10","12","12","13","13","13","11","12","12","13","13","11","7","12","11","12","6","12","5","4","13","12","0","12","12","9","12","4","10","12","13","7","11","10","7","12","12","13","13","13","13","12","12","13","0","12","4","13","12","12","2","13","12","13","13","12","12","12","13","12","13","7","12","13","7","2","10","11","5","12","13","11","8","11","9","10","13","9","8","0","8","13","12","3","12","13","12","7","12","10","12","9","12","4","12","12","13","13","8","11","13","12","13","11","12","13","9","11","11","7","12","13","7","12","10","13","10","12","9","9","11","0","13","10","12","11","9","10","12","13","7","11","10","11","9","13","10","0","9","12","12","11","13","13","12","9","7","11","12","10","6","9","10","13","10","7","12","5","12","2","11","3","11","10","9","12","5","12","13","11","7","7","13","9","12","12","2","12","10","2","9","11","7","13","4","10","13","11","12","12","12","13","12","7","12","11","10","11","12","12","10","11","13","11","8","11","12","5","12","9","12","13","12","13","12","13","13","12","10","10","11","10","13","10","13","2","12","11","13","8","11","9","5","9","11","13","11","13","11","12","13","12","11","10","12","12","12","10","12","12","13","9","13","7","10","13","12","13","13","10","13","11","9","13","9","9","10","9","10","4","13","12","3","12","13","13","12","13","10","0","8","13","6","11","5","13","12","2","11","12","12","8","9","13","12","6","11","9","7","10","12","9","7","13","12","12","7","13","12","11","13","12","13","12","13","9","12","13","7","12","10","10","9","5","12","11","12","12","12","13","11","12","9","12","9","13","7","12","13","9","13","13","12","9","9","8","13","13","12","5","9","9","8","5","10","12","13","10","13","4","12","13","8","13","2","2","10","12","12","11","13","11","4","12","13","7","13","9","12","13","12","13","12","13","0","13","12","13","13","13","7","13","12","9","2","9","10","3","7","2","12","13","13","13","7","13","7","13","12","9","6","2","0","12","0","12","12","10","12","12","13","7","12","7","12","5","13","13","7","11","4","12","11","13","12","10","11","10","3","12","12","11","9","11","11","12","12","0","13","12","7","8","8","12","9","4","10","12","0","13","11","7","12","12","12","13","7","9","5","13","2","11","13","10","13","6","13","12","3","9","13","7","13","13","0","3","10","12"],"boxpoints":"outliers","type":"box","name":"A","marker":{"color":"rgba(46,204,113,1)","line":{"color":"rgba(46,204,113,1)"}},"line":{"color":"rgba(46,204,113,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"rgba(241,196,15,0.5)","x":["Chinese","Mexican","Chinese","Caribbean","American","American","Chinese","Pizza","Chinese","Italian","Caribbean","Chinese","Mexican","American","Mexican","Japanese","Japanese","American","American","Caribbean","Chinese","Caribbean","Japanese","American","Chinese","American","American","Italian","Japanese","Mexican","Chinese","American","Chinese","American","Italian","Caribbean","Chinese","Chinese","Pizza","Chinese","Chinese","Japanese","Pizza","Caribbean","Chinese","Pizza","Caribbean","Mexican","Japanese","Caribbean","Chinese","Pizza","Pizza","Chinese","Mexican","Japanese","Japanese","Caribbean","American","Pizza","American","Japanese","Mexican","Pizza","Chinese","American","Chinese","Chinese","Japanese","Italian","American","American","American","American","Chinese","Pizza","Chinese","American","Mexican","American","Caribbean","Chinese","Mexican","Pizza","Chinese","Caribbean","Chinese","Caribbean","Chinese","American","American","American","Japanese","Caribbean","Pizza","Chinese","American","Japanese","Caribbean","Pizza","Mexican","Caribbean","American","Chinese","Mexican","Chinese","Mexican","Pizza","Pizza","American","Chinese","American","American","Mexican","American","Mexican","Chinese","Chinese","Chinese","American","Pizza","Japanese","Mexican","Pizza","Mexican","Caribbean","American","Chinese","American","Pizza","American","Pizza","American","Caribbean","Mexican","Mexican","American","Caribbean","Chinese","Chinese","Chinese","Chinese","American","Mexican","Italian","Chinese","American","American"],"y":["17","24","19","26","18","24","27","17","18","15","23","15","14","19","24","22","19","17","27","26","25","27","11","27","17","20","14","24","21","21","26","25","25","18","27","18","16","25","23","27","19","27","27","26","23","21","26","21","20","17","19","16","26","22","23","27","20","16","19","20","14","23","17","19","23","27","33","15","21","25","22","18","17","16","27","25","23","18","14","19","27","23","21","25","25","26","23","21","23","16","18","24","23","27","26","21","26","14","16","22","24","24","18","25","18","27","27","26","21","19","25","18","24","16","20","19","17","21","23","19","27","25","25","26","25","23","26","22","25","20","19","27","25","17","27","24","46","23","18","26","50","14","16","22","23","16","16","27"],"boxpoints":"outliers","type":"box","name":"B","marker":{"color":"rgba(241,196,15,1)","line":{"color":"rgba(241,196,15,1)"}},"line":{"color":"rgba(241,196,15,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"rgba(231,76,60,0.5)","x":["Chinese","Mexican","Caribbean","American","Caribbean","American","American","American","Chinese","Caribbean","Chinese","Chinese","Chinese","Caribbean","American","Chinese","American","Caribbean","American","Pizza","American","Chinese","American","Chinese","American","Chinese","Chinese","Chinese","Japanese","Chinese","Caribbean","Chinese","Mexican","Caribbean","Pizza","Caribbean","Mexican","Japanese","American","Pizza","Caribbean","Caribbean","American","Chinese","Pizza","American","Chinese","Chinese","Japanese","Pizza","American","Pizza","Pizza","Chinese","Chinese","Chinese","American","Chinese","Caribbean","Pizza","Caribbean","Caribbean","American","Chinese","American","Chinese","American","Mexican","Chinese","Chinese","Caribbean","Chinese","Pizza","Chinese","Mexican","Chinese","Chinese","Chinese"],"y":["35","37","33","43","40","44","35","35","28","37","38","51","52","31","44","31","50","10","63","31","53","52","73","85","44","31","52","39","44","41","36","40","28","43","32","41","42","44","28","29","33","43","52","60","48","38","44","33","61","29","49","32","41","30","41","43","36","41","40","50","47","94","39","42","53","54","65","33","87","31","46","73","31","39","28","31","9","12"],"boxpoints":"outliers","type":"box","name":"C","marker":{"color":"rgba(231,76,60,1)","line":{"color":"rgba(231,76,60,1)"}},"line":{"color":"rgba(231,76,60,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"rgba(155,89,182,0.5)","x":["Caribbean","Mexican","Caribbean","Pizza"],"y":["2","2","11","12"],"boxpoints":"outliers","type":"box","name":"P","marker":{"color":"rgba(155,89,182,1)","line":{"color":"rgba(155,89,182,1)"}},"line":{"color":"rgba(155,89,182,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"rgba(149,165,166,0.5)","x":["Caribbean","American","American","Chinese","Japanese","American","Caribbean","American","Caribbean","Chinese","Italian","Chinese","Japanese","Pizza","Caribbean","American","Japanese","Caribbean","American","Caribbean","Chinese","Italian","Mexican","American","American","Caribbean","Italian","American","Chinese","American","Chinese","American","Chinese","Pizza","Pizza","Caribbean","Chinese","Chinese","Caribbean","Pizza","American","Chinese","Mexican","Caribbean","Chinese"],"y":["52","20","40","21","53","24","70","30","19","58","74","27","27","33","63","26","67","33","23","5","47","74","56","60","42","70","5","4","35","18","27","14","35","7","28","63","4","16","33","26","47","53","38","22","7"],"boxpoints":"outliers","type":"box","name":"Z","marker":{"color":"rgba(149,165,166,1)","line":{"color":"rgba(149,165,166,1)"}},"line":{"color":"rgba(149,165,166,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="column-1" class="section level2" data-width="350">
<h2>Column</h2>
<div id="chart-b" class="section level3">
<h3>Chart B</h3>
<pre class="r"><code>monthly_grades &lt;- rest_clean %&gt;%
  group_by(year, month, grade) %&gt;%
  summarise(count = n(), .groups = &#39;drop&#39;) %&gt;%
  mutate(date = as.Date(paste(year, as.numeric(month), &quot;01&quot;), format = &quot;%Y %m %d&quot;))

plot_ly(monthly_grades, x = ~date, y = ~count, color = ~grade,
        colors = c(&quot;A&quot; = &quot;#2ecc71&quot;,   
                  &quot;B&quot; = &quot;#f1c40f&quot;,    
                  &quot;C&quot; = &quot;#e74c3c&quot;,    
                  &quot;P&quot; = &quot;#9b59b6&quot;,    
                  &quot;Z&quot; = &quot;#95a5a6&quot;),   
        type = &#39;scatter&#39;, 
        mode = &#39;lines+markers&#39;) %&gt;%  
  layout(
    title = &quot;Restaurant Grades Over Time&quot;,
    xaxis = list(title = &quot;Date&quot;),
    yaxis = list(title = &quot;Number of Restaurants&quot;),
    showlegend = TRUE
  )</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-0d92f569ec8e8830ec6b" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-0d92f569ec8e8830ec6b">{"x":{"visdat":{"66b87ac07fcb":["function () ","plotlyVisDat"]},"cur_data":"66b87ac07fcb","attrs":{"66b87ac07fcb":{"x":{},"y":{},"mode":"lines+markers","color":{},"colors":["#2ecc71","#f1c40f","#e74c3c","#9b59b6","#95a5a6"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Restaurant Grades Over Time","xaxis":{"domain":[0,1],"automargin":true,"title":"Date"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Number of Restaurants"},"showlegend":true,"hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2016-05-01","2016-08-01","2016-11-01","2017-02-01","2017-03-01","2017-09-01","2017-10-01","2017-12-01","2018-03-01","2018-05-01","2018-06-01","2018-08-01","2019-02-01","2019-05-01","2019-06-01","2019-08-01","2020-01-01","2020-02-01","2020-03-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01","2023-01-01","2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01","2024-02-01","2024-03-01","2024-04-01","2024-05-01","2024-06-01","2024-07-01","2024-08-01","2024-09-01","2024-10-01"],"y":[1,2,1,1,1,1,1,1,2,2,3,2,1,2,2,1,1,1,1,7,13,7,2,8,3,22,15,21,19,20,15,11,20,21,16,21,26,17,21,33,30,30,20,11,8,10,8,10,14,24,23,30,19,25,23,19,18,22,16],"mode":"lines+markers","type":"scatter","name":"A","marker":{"color":"rgba(46,204,113,1)","line":{"color":"rgba(46,204,113,1)"}},"textfont":{"color":"rgba(46,204,113,1)"},"error_y":{"color":"rgba(46,204,113,1)"},"error_x":{"color":"rgba(46,204,113,1)"},"line":{"color":"rgba(46,204,113,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2019-10-01","2021-09-01","2021-11-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01","2023-01-01","2023-02-01","2023-03-01","2023-04-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01","2024-02-01","2024-03-01","2024-04-01","2024-05-01","2024-06-01","2024-07-01","2024-08-01","2024-09-01"],"y":[1,2,1,4,3,1,1,2,1,1,4,1,8,7,13,6,10,4,2,3,8,5,10,1,2,2,2,11,5,9,1,3,9,5],"mode":"lines+markers","type":"scatter","name":"B","marker":{"color":"rgba(241,196,15,1)","line":{"color":"rgba(241,196,15,1)"}},"textfont":{"color":"rgba(241,196,15,1)"},"error_y":{"color":"rgba(241,196,15,1)"},"error_x":{"color":"rgba(241,196,15,1)"},"line":{"color":"rgba(241,196,15,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-04-01","2022-07-01","2022-08-01","2022-09-01","2022-11-01","2022-12-01","2023-01-01","2023-02-01","2023-03-01","2023-04-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-02-01","2024-03-01","2024-04-01","2024-05-01","2024-08-01","2024-09-01"],"y":[2,1,2,4,1,1,3,2,5,3,4,7,3,3,3,1,3,3,4,1,1,5,4,3,4,3,2],"mode":"lines+markers","type":"scatter","name":"C","marker":{"color":"rgba(231,76,60,1)","line":{"color":"rgba(231,76,60,1)"}},"textfont":{"color":"rgba(231,76,60,1)"},"error_y":{"color":"rgba(231,76,60,1)"},"error_x":{"color":"rgba(231,76,60,1)"},"line":{"color":"rgba(231,76,60,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2022-04-01","2022-05-01","2022-10-01"],"y":[1,2,1],"mode":"lines+markers","type":"scatter","name":"P","marker":{"color":"rgba(155,89,182,1)","line":{"color":"rgba(155,89,182,1)"}},"textfont":{"color":"rgba(155,89,182,1)"},"error_y":{"color":"rgba(155,89,182,1)"},"error_x":{"color":"rgba(155,89,182,1)"},"line":{"color":"rgba(155,89,182,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2023-01-01","2023-06-01","2023-09-01","2024-01-01","2024-03-01","2024-04-01","2024-05-01","2024-06-01","2024-07-01","2024-08-01","2024-09-01","2024-10-01"],"y":[1,1,1,2,4,8,2,1,2,13,6,4],"mode":"lines+markers","type":"scatter","name":"Z","marker":{"color":"rgba(149,165,166,1)","line":{"color":"rgba(149,165,166,1)"}},"textfont":{"color":"rgba(149,165,166,1)"},"error_y":{"color":"rgba(149,165,166,1)"},"error_x":{"color":"rgba(149,165,166,1)"},"line":{"color":"rgba(149,165,166,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="chart-c" class="section level3">
<h3>Chart C</h3>
<pre class="r"><code>plot_ly(violation_patterns, 
        x = ~reorder(str_trunc(violation_description, 30), count),
        y = ~count,
        type = &#39;bar&#39;,
        marker = list(
          color = ~avg_score,
          colorscale = &#39;RdYlBu&#39;,
          reversescale = TRUE
        ),
        text = ~paste(&quot;Avg Score:&quot;, round(avg_score, 1),
                     &quot;\nCritical:&quot;, round(pct_critical, 1), &quot;%&quot;),
        hoverinfo = &quot;text&quot;) %&gt;%
  layout(
    title = &quot;Most Common Violations&quot;,
    xaxis = list(title = &quot;&quot;,
                 tickangle = 45),
    yaxis = list(title = &quot;Number of Violations&quot;),
    showlegend = FALSE,
    margin = list(b = 120)
  )</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-3fbff834ee35276e93f4" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-3fbff834ee35276e93f4">{"x":{"visdat":{"66b81db74a5":["function () ","plotlyVisDat"]},"cur_data":"66b81db74a5","attrs":{"66b81db74a5":{"x":{},"y":{},"marker":{"color":{},"colorscale":"RdYlBu","reversescale":true},"text":{},"hoverinfo":"text","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":120,"l":60,"t":25,"r":10},"title":"Most Common Violations","xaxis":{"domain":[0,1],"automargin":true,"title":"","tickangle":45,"type":"category","categoryorder":"array","categoryarray":["Raw, cooked or prepared foo...","Filth flies or food/refuse/...","Plumbing not properly insta...","Sanitized equipment or uten...","Facility not vermin proof. ...","Food, supplies, or equipmen...","Non-food contact surface im...","Hot TCS food item not held ...","Cold TCS food item held abo...","Evidence of mice or live mi...","Anti-siphonage or back-flow...","Establishment is not free o...","Food contact surface not pr...","Non-food contact surface or..."]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Number of Violations"},"showlegend":false,"hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["Non-food contact surface or...","Food contact surface not pr...","Establishment is not free o...","Anti-siphonage or back-flow...","Evidence of mice or live mi...","Cold TCS food item held abo...","Hot TCS food item not held ...","Non-food contact surface im...","Food, supplies, or equipmen...","Facility not vermin proof. ...","Sanitized equipment or uten...","Filth flies or food/refuse/...","Filth flies or food/refuse/...","Plumbing not properly insta...","Raw, cooked or prepared foo..."],"y":[170,73,65,60,53,46,45,42,33,22,20,19,19,19,15],"marker":{"color":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"colorscale":"RdYlBu","reversescale":true,"line":{"color":"rgba(31,119,180,1)"}},"text":["Avg Score: NA <br />Critical: 0 %","Avg Score: NA <br />Critical: 100 %","Avg Score: NA <br />Critical: 0 %","Avg Score: NA <br />Critical: 0 %","Avg Score: NA <br />Critical: 100 %","Avg Score: NA <br />Critical: 100 %","Avg Score: NA <br />Critical: 100 %","Avg Score: NA <br />Critical: 0 %","Avg Score: NA <br />Critical: 100 %","Avg Score: NA <br />Critical: 0 %","Avg Score: NA <br />Critical: 100 %","Avg Score: NA <br />Critical: 100 %","Avg Score: NA <br />Critical: 100 %","Avg Score: NA <br />Critical: 0 %","Avg Score: NA <br />Critical: 100 %"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"type":"bar","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
